Author(s): BadGuyTy
Start Date:
Category: PoC scaling
Original HIP PR:
Tracking Issue:
Summary
Equitable Transmission Scaling. 

Motivation
While HIP-17 made vast improvements to the equity of rewards distribution it also penalizes optimal coverage in suburban areas.

Stakeholders
Everyone would be effected by this HIP but would benefit those at the currently scaled resolution 4 boundaries the most. This benefit would be felt
on both sides of the boundaries as those outside the boundaries are no longer subject to the scaling those in their reach are not responsible for causing.

How are we soliciting feedback on this HIP from these stakeholders? Note that they may not be watching the HIPs repository or even aren't directly active in the Helium Community Slack channels.

Detailed Explanation

Having an equitable scaling solution that scales both directions at each resolution while keeping the same resolution will cause 
each hex down scaling to only affect the most agregious sections inside that hex while allowing optimal distributions to remain or even regain some of their downscaling. 
This requires the scaling to be calculated form largest resoultion to smallest though.

The new scaling would be the smaller of the two values of 1 or the parents scaling multiplied by the unclipped hex density divided by the clipped hex density 

scaling = MIN( parent_scaling() * (unclipped / clipped) , 1)

res   | clipped | unclipped | scaling
res 4 |     250 |       375 | 0.66
res 5 |     100 |       150 | 0.44
res 6 |      25 |        20 | 0.55
res 7 |       5 |         3 | 0.6875
res 8 |       1 |         1 | 0.6875

Drawbacks
This does add a higher degree of difficulty calculating each scaling multiplier.

Rationale and Alternatives
The main complaint is that it is possible to have a lone wolf that is transmission scaled by 30-50% due to a natural barrier such as a mountain.
It is also possible for a single hex to theoretically create scaling to each resolution they belong to. 
If a single hex activated 1000 hotspots we would see the following impact to those around them.

res 4 | 250 | 1000 | 0.25
res 5 | 100 | 1000 | 0.025
res 6 |  25 | 1000 | 0.0005
res 7 |   5 | 1000 | 0.00000025

While this example is a dramatization, it proves the point that everyone inside a resolution can be greatly affected by a single res 10 hex.
This typically happens in densly populated areas surrounded by rural areas that have no chance of increasing the resolution 4 maximum. 
These densly populated areas may not even subjected to large amounts of scaling beyond resoultion 8 or 9 but are affecting hotspots 50 miles away.
The sheer size and arbitray boundaries of res 4 make scaling based on it untenable. 

Why is this design the best in the space of possible designs?

This design allows underrepresented areas of scaled areas to recover some or all of their down scaling incentivizing optimal distirbtuion of hotspots
while still maintaining stiff penalties for over saturation.

What other designs have been considered and what is the rationale for not choosing them?
HIP-17 is the other tried solution. This solution would allow penalization of largely oversaturated areas while fixing the issue of localized maximum 
scaling increases. Under HIP-17 for a hex to get an increased limit it needs 2 of the 6 neighbors to have reached "target" density. But gets penalized 
if more than 4 of its neighbors reach the "target" density. There are 19 hexes that can affect the maximum density of all 7 of the hexes that are encompased 
inside the next resolution up.

res 4 hex has 7 resolution 5 hexes inside it. There are 12 other resolution 5 hexes that can affect the max density of the primary 7. In a "target" density of 
all 19 of these hexes we have 1900 hotspots 700 inside the res 4 hex. This is a scaling of the res 4 hex to 0.35. When calculating the additional max density 
we can raise this up to 400 but that still leaves the scaling for the target at 0.57. If the target density was met from every resolution 8. It would scale 0.57
4 times. That means the target scaling is 0.10? This means that the optimal location is to live on the coast in the center of a res 4 hex. 

What is the impact of not doing this?

Not implementing it means that there are geographically disinsentivies areas that are downscaled by nature of being co-located with a population center.
These areas are dissincentivized from adding additional hotspots as they are scaled to oblivion with little hope of reaching the population center.

Deployment Impact
This would be implimented the same as HIP-17 and have the same impact.

How will existing documentation/knowlegebase need to be supported?

Is this backwards compatible?

  - If not, what is the procedure to migrate?
Success Metrics
What metrics can be used to measure the success of this design?
Reduction in scaling lines along populated areas. EG the res 4 boundary in SLC.

What should we measure to prove a performance increase?
Scaling at the higher resolutions will be dampened by under target hexes closer to the scaling.

What should we measure to prove an improvement in stability?
NA

What should we measure to prove a reduction in complexity?
NA

What should we measure to prove an acceptance of this by it's users?
Activation of hotspots in under represented areas. 
